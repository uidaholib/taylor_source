{% assign raw-dates = site.data[site.metadata] | map: 'date' | compact%}
{% capture clean-years %}{% for date in raw-dates %}{% if date contains "-" %}{{date | split: "-" | first }}{% elsif date contains "/" %}{{ date | split: "/" | last }}{% else %}{{ date }}{% endif %}{% unless forloop.last %};{% endunless %}{%- endfor -%}{% endcapture %}
{%- assign years = clean-years | split: ";" | sort  -%}